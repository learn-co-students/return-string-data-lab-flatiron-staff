<ul>
<% @products.each do |p| %>
  <li>
    <%= p.name %>
    <div data-description="<%= p.id %>"><%= truncate(p.description) %></div>
    <button class="js-more" data-id="<%= p.id %>">More Info</button>
    
  </li>

<% end %>

<script>
  $(function() {
    $("button.js-more").click(function() {
      let id = $(this).data('id');

      $.get(`/products/${id}/description`, function(res) {
        $(`div[data-description=${id}]`).text(res);
      });

      $.get(`/products/${id}/inventory`, function(res) {
        let string = res == 'true' ? 'Available' : 'Sold Out'
        $(`div[data-description=${id}]`).append(string);
      })
    });
  })
</script>